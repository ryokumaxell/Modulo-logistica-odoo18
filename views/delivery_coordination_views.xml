<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Vista Lista -->
    <record id="view_delivery_coordination_list" model="ir.ui.view">
        <field name="name">delivery.coordination.list</field>
        <field name="model">delivery.coordination</field>
        <field name="arch" type="xml">
            <list string="Entregas">
                <field name="name"/>
                <field name="date"/>
                <field name="partner_id"/>
                <field name="truck"/>
                <field name="state" widget="badge" 
                       decoration-info="state == 'draft'"
                       decoration-warning="state == 'confirmed'"
                       decoration-primary="state == 'in_transit'"
                       decoration-success="state == 'delivered'"
                       decoration-danger="state == 'cancelled'"/>
            </list>
        </field>
    </record>

    <!-- Vista Kanban -->
    <record id="view_delivery_coordination_kanban" model="ir.ui.view">
        <field name="name">delivery.coordination.kanban</field>
        <field name="model">delivery.coordination</field>
        <field name="arch" type="xml">
            <kanban default_group_by="state" class="o_kanban_small_column">
                <field name="name"/>
                <field name="date"/>
                <field name="partner_id"/>
                <field name="truck"/>
                <field name="state"/>
                <templates>
                    <t t-name="kanban-box">
                        <div class="oe_kanban_global_click">
                            <div class="o_kanban_record_top">
                                <div class="o_kanban_record_headings">
                                    <strong class="o_kanban_record_title">
                                        <field name="name"/>
                                    </strong>
                                </div>
                            </div>
                            <div class="o_kanban_record_body">
                                <field name="partner_id"/>
                                <div t-if="record.truck.raw_value">
                                    ðŸš› <field name="truck"/>
                                </div>
                                <div>
                                    ðŸ“… <field name="date"/>
                                </div>
                            </div>
                        </div>
                    </t>
                </templates>
            </kanban>
        </field>
    </record>

    <!-- Vista Formulario -->
    <record id="view_delivery_coordination_form" model="ir.ui.view">
        <field name="name">delivery.coordination.form</field>
        <field name="model">delivery.coordination</field>
        <field name="arch" type="xml">
            <form string="Entrega">
                <header>
                    <field name="state" widget="statusbar" options="{'clickable': '1'}"/>
                </header>
                <sheet>
                    <group>
                        <group>
                            <field name="name" readonly="1"/>
                            <field name="date"/>
                        </group>
                        <group>
                            <field name="partner_id"/>
                            <field name="truck"/>
                        </group>
                    </group>
                    <group>
                        <field name="notes" nolabel="1" placeholder="Notas adicionales..."/>
                    </group>
                </sheet>
            </form>
        </field>
    </record>

    <!-- AcciÃ³n -->
    <record id="action_delivery_coordination" model="ir.actions.act_window">
        <field name="name">Coordinaciones</field>
        <field name="res_model">delivery.coordination</field>
        <field name="view_mode">kanban,list,form</field>
        <field name="context">{'search_default_draft': 1, 'search_default_confirmed': 1, 'search_default_in_transit': 1}</field>
    </record>

    <!-- Vista de BÃºsqueda (Search) -->
    <record id="view_delivery_coordination_search" model="ir.ui.view">
        <field name="name">delivery.coordination.search</field>
        <field name="model">delivery.coordination</field>
        <field name="arch" type="xml">
            <search string="Buscar Entregas">
                <field name="name" string="Referencia"/>
                <field name="partner_id" string="Cliente"/>
                <field name="truck" string="CamiÃ³n"/>
                <separator/>
                <filter string="Borrador" name="draft" domain="[('state','=','draft')]"/>
                <filter string="Confirmado" name="confirmed" domain="[('state','=','confirmed')]"/>
                <filter string="En TrÃ¡nsito" name="in_transit" domain="[('state','=','in_transit')]"/>
                <filter string="Entregado" name="delivered" domain="[('state','=','delivered')]"/>
                <filter string="Cancelado" name="cancelled" domain="[('state','=','cancelled')]"/>
                <separator/>
                <filter string="Hoy" name="today" domain="[('date','=',context_today().strftime('%Y-%m-%d'))]"/>
                <group expand="0" string="Agrupar Por">
                    <filter string="Cliente" name="group_partner" context="{'group_by':'partner_id'}"/>
                    <filter string="Estado" name="group_state" context="{'group_by':'state'}"/>
                    <filter string="Fecha" name="group_date" context="{'group_by':'date'}"/>
                </group>
            </search>
        </field>
    </record>

    <!-- MenÃº -->
    <menuitem id="menu_delivery_root" name="Logistica Helaco" sequence="10"/>
    <menuitem id="menu_delivery_coordination" name="Coordinaciones" parent="menu_delivery_root" action="action_delivery_coordination" sequence="10"/>

</odoo>